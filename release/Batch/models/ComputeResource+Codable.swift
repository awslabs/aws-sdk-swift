// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension ComputeResource: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case allocationStrategy
        case bidPercentage
        case desiredvCpus
        case ec2Configuration
        case ec2KeyPair
        case imageId
        case instanceRole
        case instanceTypes
        case launchTemplate
        case maxvCpus
        case minvCpus
        case placementGroup
        case securityGroupIds
        case spotIamFleetRole
        case subnets
        case tags
        case type
    }

    public func encode(to encoder: Encoder) throws {
        var encodeContainer = encoder.container(keyedBy: CodingKeys.self)
        if let allocationStrategy = allocationStrategy {
            try encodeContainer.encode(allocationStrategy.rawValue, forKey: .allocationStrategy)
        }
        if bidPercentage != 0 {
            try encodeContainer.encode(bidPercentage, forKey: .bidPercentage)
        }
        if desiredvCpus != 0 {
            try encodeContainer.encode(desiredvCpus, forKey: .desiredvCpus)
        }
        if let ec2Configuration = ec2Configuration {
            var ec2ConfigurationContainer = encodeContainer.nestedUnkeyedContainer(forKey: .ec2Configuration)
            for ec2configurationlist0 in ec2Configuration {
                try ec2ConfigurationContainer.encode(ec2configurationlist0)
            }
        }
        if let ec2KeyPair = ec2KeyPair {
            try encodeContainer.encode(ec2KeyPair, forKey: .ec2KeyPair)
        }
        if let imageId = imageId {
            try encodeContainer.encode(imageId, forKey: .imageId)
        }
        if let instanceRole = instanceRole {
            try encodeContainer.encode(instanceRole, forKey: .instanceRole)
        }
        if let instanceTypes = instanceTypes {
            var instanceTypesContainer = encodeContainer.nestedUnkeyedContainer(forKey: .instanceTypes)
            for stringlist0 in instanceTypes {
                try instanceTypesContainer.encode(stringlist0)
            }
        }
        if let launchTemplate = launchTemplate {
            try encodeContainer.encode(launchTemplate, forKey: .launchTemplate)
        }
        if maxvCpus != 0 {
            try encodeContainer.encode(maxvCpus, forKey: .maxvCpus)
        }
        if minvCpus != 0 {
            try encodeContainer.encode(minvCpus, forKey: .minvCpus)
        }
        if let placementGroup = placementGroup {
            try encodeContainer.encode(placementGroup, forKey: .placementGroup)
        }
        if let securityGroupIds = securityGroupIds {
            var securityGroupIdsContainer = encodeContainer.nestedUnkeyedContainer(forKey: .securityGroupIds)
            for stringlist0 in securityGroupIds {
                try securityGroupIdsContainer.encode(stringlist0)
            }
        }
        if let spotIamFleetRole = spotIamFleetRole {
            try encodeContainer.encode(spotIamFleetRole, forKey: .spotIamFleetRole)
        }
        if let subnets = subnets {
            var subnetsContainer = encodeContainer.nestedUnkeyedContainer(forKey: .subnets)
            for stringlist0 in subnets {
                try subnetsContainer.encode(stringlist0)
            }
        }
        if let tags = tags {
            var tagsContainer = encodeContainer.nestedContainer(keyedBy: Key.self, forKey: .tags)
            for (dictKey0, tagsmap0) in tags {
                try tagsContainer.encode(tagsmap0, forKey: Key(stringValue: dictKey0))
            }
        }
        if let type = type {
            try encodeContainer.encode(type.rawValue, forKey: .type)
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let typeDecoded = try containerValues.decodeIfPresent(CRType.self, forKey: .type)
        type = typeDecoded
        let allocationStrategyDecoded = try containerValues.decodeIfPresent(CRAllocationStrategy.self, forKey: .allocationStrategy)
        allocationStrategy = allocationStrategyDecoded
        let minvCpusDecoded = try containerValues.decode(Int.self, forKey: .minvCpus)
        minvCpus = minvCpusDecoded
        let maxvCpusDecoded = try containerValues.decode(Int.self, forKey: .maxvCpus)
        maxvCpus = maxvCpusDecoded
        let desiredvCpusDecoded = try containerValues.decode(Int.self, forKey: .desiredvCpus)
        desiredvCpus = desiredvCpusDecoded
        let instanceTypesContainer = try containerValues.decodeIfPresent([String].self, forKey: .instanceTypes)
        var instanceTypesDecoded0:[String]? = nil
        if let instanceTypesContainer = instanceTypesContainer {
            instanceTypesDecoded0 = [String]()
            for string0 in instanceTypesContainer {
                instanceTypesDecoded0?.append(string0)
            }
        }
        instanceTypes = instanceTypesDecoded0
        let imageIdDecoded = try containerValues.decodeIfPresent(String.self, forKey: .imageId)
        imageId = imageIdDecoded
        let subnetsContainer = try containerValues.decodeIfPresent([String].self, forKey: .subnets)
        var subnetsDecoded0:[String]? = nil
        if let subnetsContainer = subnetsContainer {
            subnetsDecoded0 = [String]()
            for string0 in subnetsContainer {
                subnetsDecoded0?.append(string0)
            }
        }
        subnets = subnetsDecoded0
        let securityGroupIdsContainer = try containerValues.decodeIfPresent([String].self, forKey: .securityGroupIds)
        var securityGroupIdsDecoded0:[String]? = nil
        if let securityGroupIdsContainer = securityGroupIdsContainer {
            securityGroupIdsDecoded0 = [String]()
            for string0 in securityGroupIdsContainer {
                securityGroupIdsDecoded0?.append(string0)
            }
        }
        securityGroupIds = securityGroupIdsDecoded0
        let ec2KeyPairDecoded = try containerValues.decodeIfPresent(String.self, forKey: .ec2KeyPair)
        ec2KeyPair = ec2KeyPairDecoded
        let instanceRoleDecoded = try containerValues.decodeIfPresent(String.self, forKey: .instanceRole)
        instanceRole = instanceRoleDecoded
        let tagsContainer = try containerValues.decodeIfPresent([String:String].self, forKey: .tags)
        var tagsDecoded0: [String:String]? = nil
        if let tagsContainer = tagsContainer {
            tagsDecoded0 = [String:String]()
            for (key0, string0) in tagsContainer {
                tagsDecoded0?[key0] = string0
            }
        }
        tags = tagsDecoded0
        let placementGroupDecoded = try containerValues.decodeIfPresent(String.self, forKey: .placementGroup)
        placementGroup = placementGroupDecoded
        let bidPercentageDecoded = try containerValues.decode(Int.self, forKey: .bidPercentage)
        bidPercentage = bidPercentageDecoded
        let spotIamFleetRoleDecoded = try containerValues.decodeIfPresent(String.self, forKey: .spotIamFleetRole)
        spotIamFleetRole = spotIamFleetRoleDecoded
        let launchTemplateDecoded = try containerValues.decodeIfPresent(LaunchTemplateSpecification.self, forKey: .launchTemplate)
        launchTemplate = launchTemplateDecoded
        let ec2ConfigurationContainer = try containerValues.decodeIfPresent([Ec2Configuration].self, forKey: .ec2Configuration)
        var ec2ConfigurationDecoded0:[Ec2Configuration]? = nil
        if let ec2ConfigurationContainer = ec2ConfigurationContainer {
            ec2ConfigurationDecoded0 = [Ec2Configuration]()
            for structure0 in ec2ConfigurationContainer {
                ec2ConfigurationDecoded0?.append(structure0)
            }
        }
        ec2Configuration = ec2ConfigurationDecoded0
    }
}
