// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension StackInstance: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case account = "Account"
        case driftStatus = "DriftStatus"
        case lastDriftCheckTimestamp = "LastDriftCheckTimestamp"
        case organizationalUnitId = "OrganizationalUnitId"
        case parameterOverrides = "ParameterOverrides"
        case region = "Region"
        case stackId = "StackId"
        case stackInstanceStatus = "StackInstanceStatus"
        case stackSetId = "StackSetId"
        case status = "Status"
        case statusReason = "StatusReason"
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: Key.self)
        if let account = account {
            try container.encode(account, forKey: Key("Account"))
        }
        if let driftStatus = driftStatus {
            try container.encode(driftStatus, forKey: Key("DriftStatus"))
        }
        if let lastDriftCheckTimestamp = lastDriftCheckTimestamp {
            try container.encode(TimestampWrapper(lastDriftCheckTimestamp, format: .dateTime), forKey: Key("lastDriftCheckTimestamp"))
        }
        if let organizationalUnitId = organizationalUnitId {
            try container.encode(organizationalUnitId, forKey: Key("OrganizationalUnitId"))
        }
        if let parameterOverrides = parameterOverrides {
            var parameterOverridesContainer = container.nestedContainer(keyedBy: Key.self, forKey: Key("ParameterOverrides"))
            for (index0, parameter0) in parameterOverrides.enumerated() {
                try parameterOverridesContainer.encode(parameter0, forKey: Key("member.\(index0.advanced(by: 1))"))
            }
        }
        if let region = region {
            try container.encode(region, forKey: Key("Region"))
        }
        if let stackId = stackId {
            try container.encode(stackId, forKey: Key("StackId"))
        }
        if let stackInstanceStatus = stackInstanceStatus {
            try container.encode(stackInstanceStatus, forKey: Key("StackInstanceStatus"))
        }
        if let stackSetId = stackSetId {
            try container.encode(stackSetId, forKey: Key("StackSetId"))
        }
        if let status = status {
            try container.encode(status, forKey: Key("Status"))
        }
        if let statusReason = statusReason {
            try container.encode(statusReason, forKey: Key("StatusReason"))
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let stackSetIdDecoded = try containerValues.decodeIfPresent(String.self, forKey: .stackSetId)
        stackSetId = stackSetIdDecoded
        let regionDecoded = try containerValues.decodeIfPresent(String.self, forKey: .region)
        region = regionDecoded
        let accountDecoded = try containerValues.decodeIfPresent(String.self, forKey: .account)
        account = accountDecoded
        let stackIdDecoded = try containerValues.decodeIfPresent(String.self, forKey: .stackId)
        stackId = stackIdDecoded
        if containerValues.contains(.parameterOverrides) {
            struct KeyVal0{struct member{}}
            let parameterOverridesWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.member>.CodingKeys.self, forKey: .parameterOverrides)
            if let parameterOverridesWrappedContainer = parameterOverridesWrappedContainer {
                let parameterOverridesContainer = try parameterOverridesWrappedContainer.decodeIfPresent([Parameter].self, forKey: .member)
                var parameterOverridesBuffer:[Parameter]? = nil
                if let parameterOverridesContainer = parameterOverridesContainer {
                    parameterOverridesBuffer = [Parameter]()
                    for structureContainer0 in parameterOverridesContainer {
                        parameterOverridesBuffer?.append(structureContainer0)
                    }
                }
                parameterOverrides = parameterOverridesBuffer
            } else {
                parameterOverrides = []
            }
        } else {
            parameterOverrides = nil
        }
        let statusDecoded = try containerValues.decodeIfPresent(StackInstanceStatus.self, forKey: .status)
        status = statusDecoded
        let stackInstanceStatusDecoded = try containerValues.decodeIfPresent(StackInstanceComprehensiveStatus.self, forKey: .stackInstanceStatus)
        stackInstanceStatus = stackInstanceStatusDecoded
        let statusReasonDecoded = try containerValues.decodeIfPresent(String.self, forKey: .statusReason)
        statusReason = statusReasonDecoded
        let organizationalUnitIdDecoded = try containerValues.decodeIfPresent(String.self, forKey: .organizationalUnitId)
        organizationalUnitId = organizationalUnitIdDecoded
        let driftStatusDecoded = try containerValues.decodeIfPresent(StackDriftStatus.self, forKey: .driftStatus)
        driftStatus = driftStatusDecoded
        let lastDriftCheckTimestampDecoded = try containerValues.decodeIfPresent(String.self, forKey: .lastDriftCheckTimestamp)
        var lastDriftCheckTimestampBuffer:Date? = nil
        if let lastDriftCheckTimestampDecoded = lastDriftCheckTimestampDecoded {
            lastDriftCheckTimestampBuffer = try TimestampWrapperDecoder.parseDateStringValue(lastDriftCheckTimestampDecoded, format: .dateTime)
        }
        lastDriftCheckTimestamp = lastDriftCheckTimestampBuffer
    }
}
