// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension StackSetOperationPreferences: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case failureToleranceCount = "FailureToleranceCount"
        case failureTolerancePercentage = "FailureTolerancePercentage"
        case maxConcurrentCount = "MaxConcurrentCount"
        case maxConcurrentPercentage = "MaxConcurrentPercentage"
        case regionConcurrencyType = "RegionConcurrencyType"
        case regionOrder = "RegionOrder"
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: Key.self)
        if let failureToleranceCount = failureToleranceCount {
            try container.encode(failureToleranceCount, forKey: Key("FailureToleranceCount"))
        }
        if let failureTolerancePercentage = failureTolerancePercentage {
            try container.encode(failureTolerancePercentage, forKey: Key("FailureTolerancePercentage"))
        }
        if let maxConcurrentCount = maxConcurrentCount {
            try container.encode(maxConcurrentCount, forKey: Key("MaxConcurrentCount"))
        }
        if let maxConcurrentPercentage = maxConcurrentPercentage {
            try container.encode(maxConcurrentPercentage, forKey: Key("MaxConcurrentPercentage"))
        }
        if let regionConcurrencyType = regionConcurrencyType {
            try container.encode(regionConcurrencyType, forKey: Key("RegionConcurrencyType"))
        }
        if let regionOrder = regionOrder {
            var regionOrderContainer = container.nestedContainer(keyedBy: Key.self, forKey: Key("RegionOrder"))
            for (index0, region0) in regionOrder.enumerated() {
                try regionOrderContainer.encode(region0, forKey: Key("member.\(index0.advanced(by: 1))"))
            }
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let regionConcurrencyTypeDecoded = try containerValues.decodeIfPresent(RegionConcurrencyType.self, forKey: .regionConcurrencyType)
        regionConcurrencyType = regionConcurrencyTypeDecoded
        if containerValues.contains(.regionOrder) {
            struct KeyVal0{struct member{}}
            let regionOrderWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.member>.CodingKeys.self, forKey: .regionOrder)
            if let regionOrderWrappedContainer = regionOrderWrappedContainer {
                let regionOrderContainer = try regionOrderWrappedContainer.decodeIfPresent([String].self, forKey: .member)
                var regionOrderBuffer:[String]? = nil
                if let regionOrderContainer = regionOrderContainer {
                    regionOrderBuffer = [String]()
                    for stringContainer0 in regionOrderContainer {
                        regionOrderBuffer?.append(stringContainer0)
                    }
                }
                regionOrder = regionOrderBuffer
            } else {
                regionOrder = []
            }
        } else {
            regionOrder = nil
        }
        let failureToleranceCountDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .failureToleranceCount)
        failureToleranceCount = failureToleranceCountDecoded
        let failureTolerancePercentageDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .failureTolerancePercentage)
        failureTolerancePercentage = failureTolerancePercentageDecoded
        let maxConcurrentCountDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .maxConcurrentCount)
        maxConcurrentCount = maxConcurrentCountDecoded
        let maxConcurrentPercentageDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .maxConcurrentPercentage)
        maxConcurrentPercentage = maxConcurrentPercentageDecoded
    }
}
