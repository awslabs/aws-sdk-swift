// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

struct GetInsightRuleReportOutputResponseBody: Equatable {
    public let keyLabels: [String]?
    public let aggregationStatistic: String?
    public let aggregateValue: Double?
    public let approximateUniqueCount: Int?
    public let contributors: [InsightRuleContributor]?
    public let metricDatapoints: [InsightRuleMetricDatapoint]?
}

extension GetInsightRuleReportOutputResponseBody: Decodable {
    enum CodingKeys: String, CodingKey {
        case aggregateValue = "AggregateValue"
        case aggregationStatistic = "AggregationStatistic"
        case approximateUniqueCount = "ApproximateUniqueCount"
        case contributors = "Contributors"
        case keyLabels = "KeyLabels"
        case metricDatapoints = "MetricDatapoints"
    }

    public init (from decoder: Decoder) throws {
        let topLevelContainer = try decoder.container(keyedBy: Key.self)
        let containerValues = try topLevelContainer.nestedContainer(keyedBy: CodingKeys.self, forKey: Key("GetInsightRuleReportResult"))
        if containerValues.contains(.keyLabels) {
            struct KeyVal0{struct member{}}
            let keyLabelsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.member>.CodingKeys.self, forKey: .keyLabels)
            if let keyLabelsWrappedContainer = keyLabelsWrappedContainer {
                let keyLabelsContainer = try keyLabelsWrappedContainer.decodeIfPresent([String].self, forKey: .member)
                var keyLabelsBuffer:[String]? = nil
                if let keyLabelsContainer = keyLabelsContainer {
                    keyLabelsBuffer = [String]()
                    for stringContainer0 in keyLabelsContainer {
                        keyLabelsBuffer?.append(stringContainer0)
                    }
                }
                keyLabels = keyLabelsBuffer
            } else {
                keyLabels = []
            }
        } else {
            keyLabels = nil
        }
        let aggregationStatisticDecoded = try containerValues.decodeIfPresent(String.self, forKey: .aggregationStatistic)
        aggregationStatistic = aggregationStatisticDecoded
        let aggregateValueDecoded = try containerValues.decodeIfPresent(Double.self, forKey: .aggregateValue)
        aggregateValue = aggregateValueDecoded
        let approximateUniqueCountDecoded = try containerValues.decodeIfPresent(Int.self, forKey: .approximateUniqueCount)
        approximateUniqueCount = approximateUniqueCountDecoded
        if containerValues.contains(.contributors) {
            struct KeyVal0{struct member{}}
            let contributorsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.member>.CodingKeys.self, forKey: .contributors)
            if let contributorsWrappedContainer = contributorsWrappedContainer {
                let contributorsContainer = try contributorsWrappedContainer.decodeIfPresent([InsightRuleContributor].self, forKey: .member)
                var contributorsBuffer:[InsightRuleContributor]? = nil
                if let contributorsContainer = contributorsContainer {
                    contributorsBuffer = [InsightRuleContributor]()
                    for structureContainer0 in contributorsContainer {
                        contributorsBuffer?.append(structureContainer0)
                    }
                }
                contributors = contributorsBuffer
            } else {
                contributors = []
            }
        } else {
            contributors = nil
        }
        if containerValues.contains(.metricDatapoints) {
            struct KeyVal0{struct member{}}
            let metricDatapointsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.member>.CodingKeys.self, forKey: .metricDatapoints)
            if let metricDatapointsWrappedContainer = metricDatapointsWrappedContainer {
                let metricDatapointsContainer = try metricDatapointsWrappedContainer.decodeIfPresent([InsightRuleMetricDatapoint].self, forKey: .member)
                var metricDatapointsBuffer:[InsightRuleMetricDatapoint]? = nil
                if let metricDatapointsContainer = metricDatapointsContainer {
                    metricDatapointsBuffer = [InsightRuleMetricDatapoint]()
                    for structureContainer0 in metricDatapointsContainer {
                        metricDatapointsBuffer?.append(structureContainer0)
                    }
                }
                metricDatapoints = metricDatapointsBuffer
            } else {
                metricDatapoints = []
            }
        } else {
            metricDatapoints = nil
        }
    }
}
