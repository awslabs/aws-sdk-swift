// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension ClusterDbRevision: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case clusterIdentifier = "ClusterIdentifier"
        case currentDatabaseRevision = "CurrentDatabaseRevision"
        case databaseRevisionReleaseDate = "DatabaseRevisionReleaseDate"
        case revisionTargets = "RevisionTargets"
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: Key.self)
        if let clusterIdentifier = clusterIdentifier {
            try container.encode(clusterIdentifier, forKey: Key("ClusterIdentifier"))
        }
        if let currentDatabaseRevision = currentDatabaseRevision {
            try container.encode(currentDatabaseRevision, forKey: Key("CurrentDatabaseRevision"))
        }
        if let databaseRevisionReleaseDate = databaseRevisionReleaseDate {
            try container.encode(TimestampWrapper(databaseRevisionReleaseDate, format: .dateTime), forKey: Key("databaseRevisionReleaseDate"))
        }
        if let revisionTargets = revisionTargets {
            var revisionTargetsContainer = container.nestedContainer(keyedBy: Key.self, forKey: Key("RevisionTargets"))
            for (index0, revisiontarget0) in revisionTargets.enumerated() {
                try revisionTargetsContainer.encode(revisiontarget0, forKey: Key("RevisionTarget.\(index0.advanced(by: 1))"))
            }
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let clusterIdentifierDecoded = try containerValues.decodeIfPresent(String.self, forKey: .clusterIdentifier)
        clusterIdentifier = clusterIdentifierDecoded
        let currentDatabaseRevisionDecoded = try containerValues.decodeIfPresent(String.self, forKey: .currentDatabaseRevision)
        currentDatabaseRevision = currentDatabaseRevisionDecoded
        let databaseRevisionReleaseDateDecoded = try containerValues.decodeIfPresent(String.self, forKey: .databaseRevisionReleaseDate)
        var databaseRevisionReleaseDateBuffer:Date? = nil
        if let databaseRevisionReleaseDateDecoded = databaseRevisionReleaseDateDecoded {
            databaseRevisionReleaseDateBuffer = try TimestampWrapperDecoder.parseDateStringValue(databaseRevisionReleaseDateDecoded, format: .dateTime)
        }
        databaseRevisionReleaseDate = databaseRevisionReleaseDateBuffer
        if containerValues.contains(.revisionTargets) {
            struct KeyVal0{struct RevisionTarget{}}
            let revisionTargetsWrappedContainer = containerValues.nestedContainerNonThrowable(keyedBy: CollectionMemberCodingKey<KeyVal0.RevisionTarget>.CodingKeys.self, forKey: .revisionTargets)
            if let revisionTargetsWrappedContainer = revisionTargetsWrappedContainer {
                let revisionTargetsContainer = try revisionTargetsWrappedContainer.decodeIfPresent([RevisionTarget].self, forKey: .member)
                var revisionTargetsBuffer:[RevisionTarget]? = nil
                if let revisionTargetsContainer = revisionTargetsContainer {
                    revisionTargetsBuffer = [RevisionTarget]()
                    for structureContainer0 in revisionTargetsContainer {
                        revisionTargetsBuffer?.append(structureContainer0)
                    }
                }
                revisionTargets = revisionTargetsBuffer
            } else {
                revisionTargets = []
            }
        } else {
            revisionTargets = nil
        }
    }
}
