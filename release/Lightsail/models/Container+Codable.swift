// Code generated by smithy-swift-codegen. DO NOT EDIT!

import ClientRuntime

extension Container: Codable, Reflection {
    enum CodingKeys: String, CodingKey {
        case command
        case environment
        case image
        case ports
    }

    public func encode(to encoder: Encoder) throws {
        var encodeContainer = encoder.container(keyedBy: CodingKeys.self)
        if let command = command {
            var commandContainer = encodeContainer.nestedUnkeyedContainer(forKey: .command)
            for stringlist0 in command {
                try commandContainer.encode(stringlist0)
            }
        }
        if let environment = environment {
            var environmentContainer = encodeContainer.nestedContainer(keyedBy: Key.self, forKey: .environment)
            for (dictKey0, environment0) in environment {
                try environmentContainer.encode(environment0, forKey: Key(stringValue: dictKey0))
            }
        }
        if let image = image {
            try encodeContainer.encode(image, forKey: .image)
        }
        if let ports = ports {
            var portsContainer = encodeContainer.nestedContainer(keyedBy: Key.self, forKey: .ports)
            for (dictKey0, portmap0) in ports {
                try portsContainer.encode(portmap0.rawValue, forKey: Key(stringValue: dictKey0))
            }
        }
    }

    public init (from decoder: Decoder) throws {
        let containerValues = try decoder.container(keyedBy: CodingKeys.self)
        let imageDecoded = try containerValues.decodeIfPresent(String.self, forKey: .image)
        image = imageDecoded
        let commandContainer = try containerValues.decodeIfPresent([String?].self, forKey: .command)
        var commandDecoded0:[String]? = nil
        if let commandContainer = commandContainer {
            commandDecoded0 = [String]()
            for string0 in commandContainer {
                if let string0 = string0 {
                    commandDecoded0?.append(string0)
                }
            }
        }
        command = commandDecoded0
        let environmentContainer = try containerValues.decodeIfPresent([String: String?].self, forKey: .environment)
        var environmentDecoded0: [String:String]? = nil
        if let environmentContainer = environmentContainer {
            environmentDecoded0 = [String:String]()
            for (key0, string0) in environmentContainer {
                if let string0 = string0 {
                    environmentDecoded0?[key0] = string0
                }
            }
        }
        environment = environmentDecoded0
        let portsContainer = try containerValues.decodeIfPresent([String: ContainerServiceProtocol?].self, forKey: .ports)
        var portsDecoded0: [String:ContainerServiceProtocol]? = nil
        if let portsContainer = portsContainer {
            portsDecoded0 = [String:ContainerServiceProtocol]()
            for (key0, containerserviceprotocol0) in portsContainer {
                if let containerserviceprotocol0 = containerserviceprotocol0 {
                    portsDecoded0?[key0] = containerserviceprotocol0
                }
            }
        }
        ports = portsDecoded0
    }
}
