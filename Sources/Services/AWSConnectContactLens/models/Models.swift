// Code generated by smithy-swift-codegen. DO NOT EDIT!
import AWSClientRuntime
import ClientRuntime
import SmithyJSON
import SmithyReadWrite

extension AccessDeniedException {

    static func makeError(baseError: AWSClientRuntime.RestJSONError) throws -> AccessDeniedException {
        let reader = baseError.errorBodyReader
        var value = AccessDeniedException()
        value.properties.message = try reader["Message"].readIfPresent()
        value.httpResponse = baseError.httpResponse
        value.requestID = baseError.requestID
        value.message = baseError.message
        return value
    }
}

/// You do not have sufficient access to perform this action.
public struct AccessDeniedException: ClientRuntime.ModeledError, AWSClientRuntime.AWSServiceError, ClientRuntime.HTTPError, Swift.Error {

    public struct Properties {
        /// This member is required.
        public internal(set) var message: Swift.String? = nil
    }

    public internal(set) var properties = Properties()
    public static var typeName: Swift.String { "AccessDeniedException" }
    public static var fault: ErrorFault { .client }
    public static var isRetryable: Swift.Bool { false }
    public static var isThrottling: Swift.Bool { false }
    public internal(set) var httpResponse = HttpResponse()
    public internal(set) var message: Swift.String?
    public internal(set) var requestID: Swift.String?

    public init(
        message: Swift.String? = nil
    )
    {
        self.properties.message = message
    }
}

extension ConnectContactLensClientTypes.Categories {

    static func write(value: ConnectContactLensClientTypes.Categories?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["MatchedCategories"].writeList(value.matchedCategories, memberWritingClosure: Swift.String.write(value:to:), memberNodeInfo: "member", isFlattened: false)
        try writer["MatchedDetails"].writeMap(value.matchedDetails, valueWritingClosure: ConnectContactLensClientTypes.CategoryDetails.write(value:to:), keyNodeInfo: "key", valueNodeInfo: "value", isFlattened: false)
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.Categories {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.Categories()
        value.matchedCategories = try reader["MatchedCategories"].readListIfPresent(memberReadingClosure: Swift.String.read(from:), memberNodeInfo: "member", isFlattened: false)
        value.matchedDetails = try reader["MatchedDetails"].readMapIfPresent(valueReadingClosure: ConnectContactLensClientTypes.CategoryDetails.read(from:), keyNodeInfo: "key", valueNodeInfo: "value", isFlattened: false)
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// Provides the category rules that are used to automatically categorize contacts based on uttered keywords and phrases.
    public struct Categories {
        /// The category rules that have been matched in the analyzed segment.
        /// This member is required.
        public var matchedCategories: [Swift.String]?
        /// The category rule that was matched and when it occurred in the transcript.
        /// This member is required.
        public var matchedDetails: [Swift.String:ConnectContactLensClientTypes.CategoryDetails]?

        public init(
            matchedCategories: [Swift.String]? = nil,
            matchedDetails: [Swift.String:ConnectContactLensClientTypes.CategoryDetails]? = nil
        )
        {
            self.matchedCategories = matchedCategories
            self.matchedDetails = matchedDetails
        }
    }

}

extension ConnectContactLensClientTypes.CategoryDetails {

    static func write(value: ConnectContactLensClientTypes.CategoryDetails?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["PointsOfInterest"].writeList(value.pointsOfInterest, memberWritingClosure: ConnectContactLensClientTypes.PointOfInterest.write(value:to:), memberNodeInfo: "member", isFlattened: false)
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.CategoryDetails {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.CategoryDetails()
        value.pointsOfInterest = try reader["PointsOfInterest"].readListIfPresent(memberReadingClosure: ConnectContactLensClientTypes.PointOfInterest.read(from:), memberNodeInfo: "member", isFlattened: false)
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// Provides information about the category rule that was matched.
    public struct CategoryDetails {
        /// The section of audio where the category rule was detected.
        /// This member is required.
        public var pointsOfInterest: [ConnectContactLensClientTypes.PointOfInterest]?

        public init(
            pointsOfInterest: [ConnectContactLensClientTypes.PointOfInterest]? = nil
        )
        {
            self.pointsOfInterest = pointsOfInterest
        }
    }

}

extension ConnectContactLensClientTypes.CharacterOffsets {

    static func write(value: ConnectContactLensClientTypes.CharacterOffsets?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["BeginOffsetChar"].write(value.beginOffsetChar)
        try writer["EndOffsetChar"].write(value.endOffsetChar)
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.CharacterOffsets {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.CharacterOffsets()
        value.beginOffsetChar = try reader["BeginOffsetChar"].readIfPresent()
        value.endOffsetChar = try reader["EndOffsetChar"].readIfPresent()
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// For characters that were detected as issues, where they occur in the transcript.
    public struct CharacterOffsets {
        /// The beginning of the issue.
        /// This member is required.
        public var beginOffsetChar: Swift.Int?
        /// The end of the issue.
        /// This member is required.
        public var endOffsetChar: Swift.Int?

        public init(
            beginOffsetChar: Swift.Int? = nil,
            endOffsetChar: Swift.Int? = nil
        )
        {
            self.beginOffsetChar = beginOffsetChar
            self.endOffsetChar = endOffsetChar
        }
    }

}

public enum ConnectContactLensClientTypes {}

extension InternalServiceException {

    static func makeError(baseError: AWSClientRuntime.RestJSONError) throws -> InternalServiceException {
        let reader = baseError.errorBodyReader
        var value = InternalServiceException()
        value.properties.message = try reader["Message"].readIfPresent()
        value.httpResponse = baseError.httpResponse
        value.requestID = baseError.requestID
        value.message = baseError.message
        return value
    }
}

/// Request processing failed due to an error or failure with the service.
public struct InternalServiceException: ClientRuntime.ModeledError, AWSClientRuntime.AWSServiceError, ClientRuntime.HTTPError, Swift.Error {

    public struct Properties {
        public internal(set) var message: Swift.String? = nil
    }

    public internal(set) var properties = Properties()
    public static var typeName: Swift.String { "InternalServiceException" }
    public static var fault: ErrorFault { .server }
    public static var isRetryable: Swift.Bool { false }
    public static var isThrottling: Swift.Bool { false }
    public internal(set) var httpResponse = HttpResponse()
    public internal(set) var message: Swift.String?
    public internal(set) var requestID: Swift.String?

    public init(
        message: Swift.String? = nil
    )
    {
        self.properties.message = message
    }
}

extension InvalidRequestException {

    static func makeError(baseError: AWSClientRuntime.RestJSONError) throws -> InvalidRequestException {
        let reader = baseError.errorBodyReader
        var value = InvalidRequestException()
        value.properties.message = try reader["Message"].readIfPresent()
        value.httpResponse = baseError.httpResponse
        value.requestID = baseError.requestID
        value.message = baseError.message
        return value
    }
}

/// The request is not valid.
public struct InvalidRequestException: ClientRuntime.ModeledError, AWSClientRuntime.AWSServiceError, ClientRuntime.HTTPError, Swift.Error {

    public struct Properties {
        public internal(set) var message: Swift.String? = nil
    }

    public internal(set) var properties = Properties()
    public static var typeName: Swift.String { "InvalidRequestException" }
    public static var fault: ErrorFault { .client }
    public static var isRetryable: Swift.Bool { false }
    public static var isThrottling: Swift.Bool { false }
    public internal(set) var httpResponse = HttpResponse()
    public internal(set) var message: Swift.String?
    public internal(set) var requestID: Swift.String?

    public init(
        message: Swift.String? = nil
    )
    {
        self.properties.message = message
    }
}

extension ConnectContactLensClientTypes.IssueDetected {

    static func write(value: ConnectContactLensClientTypes.IssueDetected?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["CharacterOffsets"].write(value.characterOffsets, with: ConnectContactLensClientTypes.CharacterOffsets.write(value:to:))
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.IssueDetected {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.IssueDetected()
        value.characterOffsets = try reader["CharacterOffsets"].readIfPresent(with: ConnectContactLensClientTypes.CharacterOffsets.read(from:))
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// Potential issues that are detected based on an artificial intelligence analysis of each turn in the conversation.
    public struct IssueDetected {
        /// The offset for when the issue was detected in the segment.
        /// This member is required.
        public var characterOffsets: ConnectContactLensClientTypes.CharacterOffsets?

        public init(
            characterOffsets: ConnectContactLensClientTypes.CharacterOffsets? = nil
        )
        {
            self.characterOffsets = characterOffsets
        }
    }

}

extension ListRealtimeContactAnalysisSegmentsInput {

    static func urlPathProvider(_ value: ListRealtimeContactAnalysisSegmentsInput) -> Swift.String? {
        return "/realtime-contact-analysis/analysis-segments"
    }
}

extension ListRealtimeContactAnalysisSegmentsInput {

    static func write(value: ListRealtimeContactAnalysisSegmentsInput?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["ContactId"].write(value.contactId)
        try writer["InstanceId"].write(value.instanceId)
        try writer["MaxResults"].write(value.maxResults)
        try writer["NextToken"].write(value.nextToken)
    }
}

public struct ListRealtimeContactAnalysisSegmentsInput {
    /// The identifier of the contact.
    /// This member is required.
    public var contactId: Swift.String?
    /// The identifier of the Amazon Connect instance.
    /// This member is required.
    public var instanceId: Swift.String?
    /// The maximimum number of results to return per page.
    public var maxResults: Swift.Int?
    /// The token for the next set of results. Use the value returned in the previous response in the next request to retrieve the next set of results.
    public var nextToken: Swift.String?

    public init(
        contactId: Swift.String? = nil,
        instanceId: Swift.String? = nil,
        maxResults: Swift.Int? = nil,
        nextToken: Swift.String? = nil
    )
    {
        self.contactId = contactId
        self.instanceId = instanceId
        self.maxResults = maxResults
        self.nextToken = nextToken
    }
}

extension ListRealtimeContactAnalysisSegmentsOutput {

    static func httpOutput(from httpResponse: ClientRuntime.HttpResponse) async throws -> ListRealtimeContactAnalysisSegmentsOutput {
        let data = try await httpResponse.data()
        let responseReader = try SmithyJSON.Reader.from(data: data)
        let reader = responseReader
        var value = ListRealtimeContactAnalysisSegmentsOutput()
        value.nextToken = try reader["NextToken"].readIfPresent()
        value.segments = try reader["Segments"].readListIfPresent(memberReadingClosure: ConnectContactLensClientTypes.RealtimeContactAnalysisSegment.read(from:), memberNodeInfo: "member", isFlattened: false)
        return value
    }
}

public struct ListRealtimeContactAnalysisSegmentsOutput {
    /// If there are additional results, this is the token for the next set of results. If response includes nextToken there are two possible scenarios:
    ///
    /// * There are more segments so another call is required to get them.
    ///
    /// * There are no more segments at this time, but more may be available later (real-time analysis is in progress) so the client should call the operation again to get new segments.
    ///
    ///
    /// If response does not include nextToken, the analysis is completed (successfully or failed) and there are no more segments to retrieve.
    public var nextToken: Swift.String?
    /// An analyzed transcript or category.
    /// This member is required.
    public var segments: [ConnectContactLensClientTypes.RealtimeContactAnalysisSegment]?

    public init(
        nextToken: Swift.String? = nil,
        segments: [ConnectContactLensClientTypes.RealtimeContactAnalysisSegment]? = nil
    )
    {
        self.nextToken = nextToken
        self.segments = segments
    }
}

enum ListRealtimeContactAnalysisSegmentsOutputError {

    static func httpError(from httpResponse: ClientRuntime.HttpResponse) async throws -> Swift.Error {
        let data = try await httpResponse.data()
        let responseReader = try SmithyJSON.Reader.from(data: data)
        let baseError = try AWSClientRuntime.RestJSONError(httpResponse: httpResponse, responseReader: responseReader, noErrorWrapping: false)
        if let error = baseError.customError() { return error }
        switch baseError.code {
            case "AccessDeniedException": return try AccessDeniedException.makeError(baseError: baseError)
            case "InternalServiceException": return try InternalServiceException.makeError(baseError: baseError)
            case "InvalidRequestException": return try InvalidRequestException.makeError(baseError: baseError)
            case "ResourceNotFoundException": return try ResourceNotFoundException.makeError(baseError: baseError)
            case "ThrottlingException": return try ThrottlingException.makeError(baseError: baseError)
            default: return try AWSClientRuntime.UnknownAWSHTTPServiceError.makeError(baseError: baseError)
        }
    }
}

extension ConnectContactLensClientTypes.PointOfInterest {

    static func write(value: ConnectContactLensClientTypes.PointOfInterest?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["BeginOffsetMillis"].write(value.beginOffsetMillis)
        try writer["EndOffsetMillis"].write(value.endOffsetMillis)
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.PointOfInterest {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.PointOfInterest()
        value.beginOffsetMillis = try reader["BeginOffsetMillis"].readIfPresent()
        value.endOffsetMillis = try reader["EndOffsetMillis"].readIfPresent()
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// The section of the contact audio where that category rule was detected.
    public struct PointOfInterest {
        /// The beginning offset in milliseconds where the category rule was detected.
        /// This member is required.
        public var beginOffsetMillis: Swift.Int?
        /// The ending offset in milliseconds where the category rule was detected.
        /// This member is required.
        public var endOffsetMillis: Swift.Int?

        public init(
            beginOffsetMillis: Swift.Int? = nil,
            endOffsetMillis: Swift.Int? = nil
        )
        {
            self.beginOffsetMillis = beginOffsetMillis
            self.endOffsetMillis = endOffsetMillis
        }
    }

}

extension ConnectContactLensClientTypes.RealtimeContactAnalysisSegment {

    static func write(value: ConnectContactLensClientTypes.RealtimeContactAnalysisSegment?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["Categories"].write(value.categories, with: ConnectContactLensClientTypes.Categories.write(value:to:))
        try writer["Transcript"].write(value.transcript, with: ConnectContactLensClientTypes.Transcript.write(value:to:))
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.RealtimeContactAnalysisSegment {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.RealtimeContactAnalysisSegment()
        value.transcript = try reader["Transcript"].readIfPresent(with: ConnectContactLensClientTypes.Transcript.read(from:))
        value.categories = try reader["Categories"].readIfPresent(with: ConnectContactLensClientTypes.Categories.read(from:))
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// An analyzed segment for a real-time analysis session.
    public struct RealtimeContactAnalysisSegment {
        /// The matched category rules.
        public var categories: ConnectContactLensClientTypes.Categories?
        /// The analyzed transcript.
        public var transcript: ConnectContactLensClientTypes.Transcript?

        public init(
            categories: ConnectContactLensClientTypes.Categories? = nil,
            transcript: ConnectContactLensClientTypes.Transcript? = nil
        )
        {
            self.categories = categories
            self.transcript = transcript
        }
    }

}

extension ResourceNotFoundException {

    static func makeError(baseError: AWSClientRuntime.RestJSONError) throws -> ResourceNotFoundException {
        let reader = baseError.errorBodyReader
        var value = ResourceNotFoundException()
        value.properties.message = try reader["Message"].readIfPresent()
        value.httpResponse = baseError.httpResponse
        value.requestID = baseError.requestID
        value.message = baseError.message
        return value
    }
}

/// The specified resource was not found.
public struct ResourceNotFoundException: ClientRuntime.ModeledError, AWSClientRuntime.AWSServiceError, ClientRuntime.HTTPError, Swift.Error {

    public struct Properties {
        public internal(set) var message: Swift.String? = nil
    }

    public internal(set) var properties = Properties()
    public static var typeName: Swift.String { "ResourceNotFoundException" }
    public static var fault: ErrorFault { .client }
    public static var isRetryable: Swift.Bool { false }
    public static var isThrottling: Swift.Bool { false }
    public internal(set) var httpResponse = HttpResponse()
    public internal(set) var message: Swift.String?
    public internal(set) var requestID: Swift.String?

    public init(
        message: Swift.String? = nil
    )
    {
        self.properties.message = message
    }
}

extension ConnectContactLensClientTypes {

    public enum SentimentValue: Swift.Equatable, Swift.RawRepresentable, Swift.CaseIterable, Swift.Hashable {
        case negative
        case neutral
        case positive
        case sdkUnknown(Swift.String)

        public static var allCases: [SentimentValue] {
            return [
                .negative,
                .neutral,
                .positive,
                .sdkUnknown("")
            ]
        }

        public init?(rawValue: Swift.String) {
            let value = Self.allCases.first(where: { $0.rawValue == rawValue })
            self = value ?? Self.sdkUnknown(rawValue)
        }

        public var rawValue: Swift.String {
            switch self {
            case .negative: return "NEGATIVE"
            case .neutral: return "NEUTRAL"
            case .positive: return "POSITIVE"
            case let .sdkUnknown(s): return s
            }
        }
    }
}

extension ThrottlingException {

    static func makeError(baseError: AWSClientRuntime.RestJSONError) throws -> ThrottlingException {
        let reader = baseError.errorBodyReader
        var value = ThrottlingException()
        value.properties.message = try reader["Message"].readIfPresent()
        value.httpResponse = baseError.httpResponse
        value.requestID = baseError.requestID
        value.message = baseError.message
        return value
    }
}

/// The throttling limit has been exceeded.
public struct ThrottlingException: ClientRuntime.ModeledError, AWSClientRuntime.AWSServiceError, ClientRuntime.HTTPError, Swift.Error {

    public struct Properties {
        /// This member is required.
        public internal(set) var message: Swift.String? = nil
    }

    public internal(set) var properties = Properties()
    public static var typeName: Swift.String { "ThrottlingException" }
    public static var fault: ErrorFault { .client }
    public static var isRetryable: Swift.Bool { false }
    public static var isThrottling: Swift.Bool { false }
    public internal(set) var httpResponse = HttpResponse()
    public internal(set) var message: Swift.String?
    public internal(set) var requestID: Swift.String?

    public init(
        message: Swift.String? = nil
    )
    {
        self.properties.message = message
    }
}

extension ConnectContactLensClientTypes.Transcript {

    static func write(value: ConnectContactLensClientTypes.Transcript?, to writer: SmithyJSON.Writer) throws {
        guard let value else { return }
        try writer["BeginOffsetMillis"].write(value.beginOffsetMillis)
        try writer["Content"].write(value.content)
        try writer["EndOffsetMillis"].write(value.endOffsetMillis)
        try writer["Id"].write(value.id)
        try writer["IssuesDetected"].writeList(value.issuesDetected, memberWritingClosure: ConnectContactLensClientTypes.IssueDetected.write(value:to:), memberNodeInfo: "member", isFlattened: false)
        try writer["ParticipantId"].write(value.participantId)
        try writer["ParticipantRole"].write(value.participantRole)
        try writer["Sentiment"].write(value.sentiment)
    }

    static func read(from reader: SmithyJSON.Reader) throws -> ConnectContactLensClientTypes.Transcript {
        guard reader.hasContent else { throw SmithyReadWrite.ReaderError.requiredValueNotPresent }
        var value = ConnectContactLensClientTypes.Transcript()
        value.id = try reader["Id"].readIfPresent()
        value.participantId = try reader["ParticipantId"].readIfPresent()
        value.participantRole = try reader["ParticipantRole"].readIfPresent()
        value.content = try reader["Content"].readIfPresent()
        value.beginOffsetMillis = try reader["BeginOffsetMillis"].readIfPresent()
        value.endOffsetMillis = try reader["EndOffsetMillis"].readIfPresent()
        value.sentiment = try reader["Sentiment"].readIfPresent()
        value.issuesDetected = try reader["IssuesDetected"].readListIfPresent(memberReadingClosure: ConnectContactLensClientTypes.IssueDetected.read(from:), memberNodeInfo: "member", isFlattened: false)
        return value
    }
}

extension ConnectContactLensClientTypes {
    /// A list of messages in the session.
    public struct Transcript {
        /// The beginning offset in the contact for this transcript.
        /// This member is required.
        public var beginOffsetMillis: Swift.Int?
        /// The content of the transcript.
        /// This member is required.
        public var content: Swift.String?
        /// The end offset in the contact for this transcript.
        /// This member is required.
        public var endOffsetMillis: Swift.Int?
        /// The identifier of the transcript.
        /// This member is required.
        public var id: Swift.String?
        /// List of positions where issues were detected on the transcript.
        public var issuesDetected: [ConnectContactLensClientTypes.IssueDetected]?
        /// The identifier of the participant.
        /// This member is required.
        public var participantId: Swift.String?
        /// The role of participant. For example, is it a customer, agent, or system.
        /// This member is required.
        public var participantRole: Swift.String?
        /// The sentiment of the detected for this piece of transcript.
        /// This member is required.
        public var sentiment: ConnectContactLensClientTypes.SentimentValue?

        public init(
            beginOffsetMillis: Swift.Int? = nil,
            content: Swift.String? = nil,
            endOffsetMillis: Swift.Int? = nil,
            id: Swift.String? = nil,
            issuesDetected: [ConnectContactLensClientTypes.IssueDetected]? = nil,
            participantId: Swift.String? = nil,
            participantRole: Swift.String? = nil,
            sentiment: ConnectContactLensClientTypes.SentimentValue? = nil
        )
        {
            self.beginOffsetMillis = beginOffsetMillis
            self.content = content
            self.endOffsetMillis = endOffsetMillis
            self.id = id
            self.issuesDetected = issuesDetected
            self.participantId = participantId
            self.participantRole = participantRole
            self.sentiment = sentiment
        }
    }

}
